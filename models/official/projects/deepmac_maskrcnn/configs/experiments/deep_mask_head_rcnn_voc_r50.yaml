task:
  # VOC class taken from
  # models/official/vision/detection/utils/class_utils.py
  allowed_mask_class_ids: [1, 2, 3, 4, 5, 6, 7, 9, 16, 17, 18, 19, 20, 21, 44, 62, 63, 64, 67, 72]
  per_category_metrics: true
  init_checkpoint: 'gs://deep-mapan-train/init_ckpt/resnet50_imagenet/ckpt-28080'
  annotation_file: 'gs://deep-mapan-train/tf_data/coco/instances_val2017.json'
  model:
    mask_head:
      class_agnostic: true
    use_gt_boxes_for_masks: true
    bpa: false
    afp: false
    backbone:
      type: 'resnet'
      resnet:
        model_id: 50
  # init_checkpoint: 'gs://tf_model_garden/vision/resnet50_imagenet/ckpt-28080'
  # init_checkpoint: null
  init_checkpoint: 'gs://deep-mapan-train/init_ckpt/resnet50_imagenet/ckpt-28080'
  train_data:
    global_batch_size: 64
    input_path: 'gs://deep-mapan-train/tf_data/coco/train/train2017-?????-of-00256.tfrecord'
  validation_data:
    input_path: 'gs://deep-mapan-train/tf_data/coco/val/val2017-?????-of-00032.tfrecord'
    global_batch_size: 32

trainer:
  optimizer_config:
    learning_rate:
      stepwise:2
      type: 'stepwise'
  train_steps: 70000
  validation_steps: 156  # 5000 / 32
